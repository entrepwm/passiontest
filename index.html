<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Passion Test Siswa</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f7fa; margin:0; padding:0; }
    header, footer { text-align:center; margin:0; padding:0; }
    header img { max-width:90%; height:auto; display:block; margin:0 auto; }
    footer img { max-width:80%; height:auto; display:block; margin:40px auto 20px; }
    .container { max-width:800px; margin:0 auto 40px; background:#fff; padding:30px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.1); }
    h1 { text-align:center; }
    .question { margin-bottom:25px; }
    .question h3 { margin-bottom:10px; }
    label { display:block; margin:6px 0; cursor:pointer; }
    input[type="text"], input[type="email"], input[type="tel"] { width:100%; padding:10px; margin-top:6px; border-radius:6px; border:1px solid #ccc; }
    button { background:#2563eb; color:#fff; border:none; padding:12px 20px; border-radius:8px; font-size:16px; cursor:pointer; }
    button:hover { background:#1e4ed8; }
    #result { margin-top:40px; display:none; }
    canvas { max-width:100%; }
  </style>
</head>
<body>

<header>
  <img src="1.png" alt="Entrepreneurship Study Program">
</header>

<div class="container">
  <h1>Passion Test Siswa</h1>
  <p style="text-align:center">Pilih satu jawaban yang paling menggambarkan diri kamu.</p>

  <form id="passionForm">

    <div class="question">
      <h3>Data Diri</h3>
      <label>Nama Lengkap
        <input type="text" name="nama" required>
      </label>
      <label>Email
        <input type="email" name="email" required placeholder="nama@email.com">
      </label>
      <label>Nomor HP / WhatsApp
        <input type="tel" name="hp" required placeholder="08xxxxxxxxxx">
      </label>
    </div>

    <div id="questions"></div>

    <button type="submit">Lihat Hasil</button>
  </form>

  <div id="result">
    <h2 style="text-align:center">Hasil Passion Kamu</h2>
    <canvas id="chart"></canvas>
  </div>
</div>

<footer>
  <img src="2.png" alt="One Degree One Startup">
</footer>

<script>
document.getElementById('passionForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const scores = { Culinary:0, Fashion:0, Techno:0, Health:0, Edu:0 };
  const map = { A:'Culinary', B:'Fashion', C:'Techno', D:'Health', E:'Edu' };

  questionsData.forEach((_, i) => {
    const answer = document.querySelector(`input[name=q${i}]:checked`).value;
    scores[map[answer]]++;
  });

  const payload = {
    nama: document.querySelector('input[name="nama"]').value,
    email: document.querySelector('input[name="email"]').value,
    hp: document.querySelector('input[name="hp"]').value,
    Culinary: scores.Culinary,
    Fashion: scores.Fashion,
    Techno: scores.Techno,
    Health: scores.Health,
    Edu: scores.Edu
  };

  fetch('https://script.google.com/macros/s/AKfycbyWhaNFLabF6i6skm4RX1DUCsYyp6B3I0ieBKeg37_Yf2Hj1Mzg-st56Xnqqk-wwubbzw/exec', {
    method: 'POST',
    mode: 'no-cors',
    headers: {
      'Content-Type': 'application/json' // âœ… CRITICAL FIX
    },
    body: JSON.stringify(payload)
  });

  document.getElementById('result').style.display = 'block';

  new Chart(document.getElementById('chart'), {
    type: 'bar',
    data: {
      labels: ['Culinary Art', 'Fashion & Innovation', 'Technopreneur', 'Health & Beauty', 'Edupreneur'],
      datasets: [{ data: Object.values(scores).map(v => Math.round(v / 10 * 100)) }]
    },
    options: { scales: { y: { beginAtZero: true, max: 100 } } }
  });
});
</script>
</body>
</html>




